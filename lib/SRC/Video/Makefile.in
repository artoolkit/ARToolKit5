#
#  Makefile
#  ARToolKit5
#
#  This file is part of ARToolKit.
#
#  ARToolKit is free software: you can redistribute it and/or modify
#  it under the terms of the GNU Lesser General Public License as published by
#  the Free Software Foundation, either version 3 of the License, or
#  (at your option) any later version.
#
#  ARToolKit is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY; without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#  GNU Lesser General Public License for more details.
#
#  You should have received a copy of the GNU Lesser General Public License
#  along with ARToolKit.  If not, see <http://www.gnu.org/licenses/>.
#
#  As a special exception, the copyright holders of this library give you
#  permission to link this library with independent modules to produce an
#  executable, regardless of the license terms of these independent modules, and to
#  copy and distribute the resulting executable under terms of your choice,
#  provided that you also meet, for each linked independent module, the terms and
#  conditions of the license of that module. An independent module is a module
#  which is neither derived from nor based on this library. If you modify this
#  library, you may extend this exception to your version of the library, but you
#  are not obligated to do so. If you do not wish to do so, delete this exception
#  statement from your version.
#
#  Copyright 2015 Daqri, LLC.
#  Copyright 2002-2015 ARToolworks, Inc.
#
#  Author(s): Hirokazu Kato, Philip Lamb
#

#
# For instalation. Change this to your settings.
#
INC_DIR = ../../../include
LIB_DIR = ../..
#
#  compiler
#
CC=@CC@
CFLAG= @CFLAG@ -I$(INC_DIR)/@SYSTEM@ -I$(INC_DIR)
#
# For making the library
#
AR=@AR@
ARFLAGS=@ARFLAGS@
RANLIB= @RANLIB@
#
#   products
#
LIB= ${LIB_DIR}/libARvideo.a
INCLUDE= ${INC_DIR}/AR/config.h       \
         ${INC_DIR}/AR/arConfig.h     \
         ${INC_DIR}/AR/ar.h           \
         ${INC_DIR}/AR/videoConfig.h  \
         ${INC_DIR}/AR/videoLuma.h    \
         ${INC_DIR}/AR/videoRGBA.h     \
         ${INC_DIR}/AR/video.h        \
         cparamSearch.h               \
         nxjson.h                     \

#
#   compilation control
#
LIBOBJS= ${LIB}(video.o)  \
	 ${LIB}(video2.o) \
	 ${LIB}(videoAspectRatio.o) \
     ${LIB}(videoLuma.o) \
     ${LIB}(videoRGBA.o) \
	 ${LIB}(videoSaveImage.o) \
     ${LIB}(cparamSearch.o) \

all: ${LIBOBJS}
	(cd Dummy; make -f Makefile)
	#(cd Image; make -f Makefile)
	#(cd Video4Linux2; make -f Makefile)
	#(cd libdc1394; make -f Makefile)
	#(cd Video/GStreamer; make -f Makefile)

${LIBOBJS}:	${INCLUDE}

.c.a:
	${CC} -c ${CFLAG} $<
	${AR} ${ARFLAGS} $@ $*.o
	${RANLIB}
	rm -f $*.o
	(cd Dummy; make -f Makefile)
	#(cd Image; make -f Makefile)
	#(cd Video4Linux2; make -f Makefile)
	#(cd libdc1394; make -f Makefile)
	#(cd GStreamer; make -f Makefile)

clean:
	rm -f *.o
	rm -f ${LIB}
	(cd Dummy; make -f Makefile clean)
	(cd Image; make -f Makefile clean)
	(cd Video4Linux2; make -f Makefile clean)
	(cd libdc1394; make -f Makefile clean)
	(cd GStreamer; make -f Makefile clean)

allclean:
	rm -f *.o
	rm -f ${LIB}
	rm -f Makefile
	(cd Dummy; make -f Makefile allclean)
	(cd Image; make -f Makefile allclean)
	(cd Video4Linux2; make -f Makefile allclean)
	(cd libdc1394; make -f Makefile allclean)
	(cd GStreamer; make -f Makefile allclean)

distclean:
	rm -f *.o
	rm -f Makefile
	(cd Dummy; make -f Makefile distclean)
	(cd Image; make -f Makefile distclean)
	(cd Video4Linux2; make -f Makefile distclean)
	(cd libdc1394; make -f Makefile distclean)
	(cd GStreamer; make -f Makefile distclean)
